(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function c(n,r,o,i){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return a(u,"_invoke",function(n,a,r){var o,i,c,s=0,u=r||[],d=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,c=e,f.n=n,l}};function m(n,a){for(i=n,c=a,t=0;!d&&s&&!r&&t<u.length;t++){var r,o=u[t],m=f.p,p=o[2];n>3?(r=p===a)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((r=n<2&&m<o[1])?(i=0,f.v=a,f.n=o[1]):m<p&&(r=n<3||o[0]>a||a>p)&&(o[4]=n,o[5]=a,f.n=p,i=0))}if(r||n>1)return l;throw d=!0,a}return function(r,u,p){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,p),i=u,c=p;(t=i<2?e:c)||!d;){o||(i?i<3?(i>1&&(f.n=-1),m(i,c)):f.n=c:f.v=c);try{if(s=2,o){if(i||(r="next"),t=o[r]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),i=1);o=e}else if((t=(d=f.n<0)?c:n.call(a,f))!==l)break}catch(t){o=e,i=1,c=t}finally{s=1}}return{value:t,done:d}}}(n,o,i),!0),u}var l={};function s(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,function(){return this}),t),m=d.prototype=s.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,i,"GeneratorFunction")),e.prototype=Object.create(m),e}return u.prototype=d,a(m,"constructor",d),a(d,"constructor",u),u.displayName="GeneratorFunction",a(d,i,"GeneratorFunction"),a(m),a(m,i,"Generator"),a(m,o,function(){return this}),a(m,"toString",function(){return"[object Generator]"}),(n=function(){return{w:c,m:p}})()}function a(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,n,r){function i(t,n){a(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},a(e,t,n,r)}function r(e,t,n,a,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var i=e.apply(t,n);function c(e){r(i,a,o,c,l,"next",e)}function l(e){r(i,a,o,c,l,"throw",e)}c(void 0)})}}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,i,c=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=o.call(n)).done)&&(c.push(a.value),c.length!==t);l=!0);}catch(e){s=!0,r=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw r}}return c}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function l(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,m(a.key),a)}}function d(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function f(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,n||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}function p(e,t){return e.get(function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(e,t))}var h=new WeakMap,b=new WeakMap,v=new WeakMap,g=new WeakMap,y=function(){return e=function e(){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"quickSearchAjax",null),f(this,"filterAjax",null),f(this,"lastFilterFormData",null),f(this,"lastFilterFormAction",null),f(this,"filterTimeout",null),d(this,h,function(e){var t=[],n={},a={};return e.forEach(function(e){if(e.value)if(e.name.includes("attributes["))e.value&&t.push(e);else if(e.name.endsWith("[]")){var r=e.name.slice(0,-2);n[r]||(n[r]=new Set),n[r].add(e.value)}else a[e.name]||(a[e.name]=!0,t.push(e))}),Object.keys(n).forEach(function(e){var a=Array.from(n[e]);a.length>0&&t.push({name:e,value:a.join(",")})}),t}),f(this,"highlightSearchKeywords",function(e,t){if(t.trim()){var n=t.trim().split(/\s+/),a=new RegExp("(".concat(n.join("|"),")"),"gi");e.html(e.text().replace(a,'<span class="bb-quick-search-highlight">$1</span>'))}}),d(this,b,function(e,t){var n=e.find('button[type="submit"]'),r=e.find('input[name="q"]'),o=e.find(".bb-quick-search-results");r.val()?a.quickSearchAjax=$.ajax({type:"GET",url:t||e.data("ajax-url"),data:e.serialize(),beforeSend:function(){n.addClass("btn-loading"),t||o.removeClass("show").html(""),null!==a.quickSearchAjax&&a.quickSearchAjax.abort()},success:function(e){var n=e.error,i=e.message,c=e.data;if(n)Theme.showError(i);else{o.addClass("show"),t?o.find(".bb-quick-search-list").append($(c).find(".bb-quick-search-list").html()):o.html(c);var l=a,s=r.val();o.find(".bb-quick-search-item-name").each(function(){$(this).html($(this).text()),s&&l.highlightSearchKeywords($(this),s)}),void 0!==Theme.lazyLoadInstance&&Theme.lazyLoadInstance.update()}},complete:function(){return n.removeClass("btn-loading")}}):o.removeClass("show").html("")}),d(this,v,function(e,t,n){var r=$(".bb-product-form-filter");e&&!t&&(a.lastFilterFormData=null,a.lastFilterFormAction=null);var o=t;if(Array.isArray(t)){var l=new URLSearchParams,s={},u={};t.forEach(function(e){e.name&&e.value&&(e.name.includes("attributes[")&&e.name.endsWith("[]")?(u[e.name]||(u[e.name]=[]),u[e.name].push(e.value)):s[e.name]=e.value)}),Object.keys(s).forEach(function(e){l.set(e,s[e])}),Object.keys(u).forEach(function(e){u[e].forEach(function(t){l.append(e,t)})}),o={},Object.keys(s).forEach(function(e){o[e]=s[e]}),Object.keys(u).forEach(function(e){o[e]=u[e]})}a.filterAjax=$.ajax({url:e,type:"GET",data:o,beforeSend:function(){document.dispatchEvent(new CustomEvent("ecommerce.product-filter.before",{detail:{data:o,element:r}}))},success:function(t){var o=t.message;if(t.error)return Theme.showError(o),void(a.filterAjax=null);var l=n||e;if(l.includes("?")){var s,u=l.split("?"),d=u[0],f=new URLSearchParams(u[1]),m=new URLSearchParams,p={},h=c(f.entries());try{for(h.s();!(s=h.n()).done;){var b=i(s.value,2),v=b[0],g=b[1];v.includes("attributes[")&&v.endsWith("[]")?(p[v]||(p[v]=[]),p[v].push(g)):m.has(v)||m.set(v,g)}}catch(e){h.e(e)}finally{h.f()}Object.keys(p).forEach(function(e){p[e].forEach(function(t){m.append(e,t)})}),l=d+"?"+m.toString()}window.history.pushState(t,null,l),document.dispatchEvent(new CustomEvent("ecommerce.product-filter.success",{detail:{data:t,element:r}})),a.filterAjax=null,$(".bb-product-price-filter").length&&EcommerceApp.initPriceFilter()},error:function(e){"abort"!==e.statusText&&(console.error("Filter request failed:",e),Theme.handleError(e))},complete:function(){a.filterTimeout=null,a.filterAjax=null,void 0!==Theme.lazyLoadInstance&&Theme.lazyLoadInstance.update(),document.dispatchEvent(new CustomEvent("ecommerce.product-filter.completed",{detail:{element:r}}))}})}),d(this,g,o(n().m(function e(){var t,a,r;return n().w(function(e){for(;;)switch(e.n){case 0:t=function(e,t,n){t(),fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(function(e){var t=e.error,a=e.data;t||(n(a),document.dispatchEvent(new CustomEvent("ecommerce.categories-dropdown.success",{detail:{data:a}})))}).catch(function(e){Theme.handleError(e)})},(a=$(document).find('[data-bb-toggle="init-categories-dropdown"]')).length&&(r=a.first().data("url"),t(r,function(){},function(e){a.each(function(t,n){var a=$(n),r=$(a.data("bb-target"));r.length?r.html(e.dropdown):a.append(e.select),void 0!==Theme.lazyLoadInstance&&Theme.lazyLoadInstance.update()})}));case 1:return e.a(2)}},e)}))),f(this,"productQuantityToggle",function(){$('[data-bb-toggle="product-quantity"]').on("click",'[data-bb-toggle="product-quantity-toggle"]',function(e){var t=$(e.currentTarget),n=t.data("value");if(n){var a=null;if("plus"===n?a=t.prev():"minus"===n&&(a=t.next()),a){var r=parseInt(a.val())||1;a.val("plus"===n?r+1:1===r?1:r-1),document.dispatchEvent(new CustomEvent("ecommerce.cart.quantity.change",{detail:{element:t,action:"+"===n?"increase":"decrease"}}))}}})}),f(this,"onChangeProductAttribute",function(){window.onBeforeChangeSwatches&&"function"==typeof window.onBeforeChangeSwatches||(window.onBeforeChangeSwatches=function(e,t){var n=t.closest("form");e&&(n.find('button[type="submit"]').prop("disabled",!0),n.find('button[data-bb-toggle="add-to-cart"]').prop("disabled",!0))}),window.onChangeSwatchesSuccess&&"function"==typeof window.onChangeSwatchesSuccess||(window.onChangeSwatchesSuccess=function(e,t){if(e){var n=$(".bb-product-detail"),a=t.closest("form"),r=a.find('button[type="submit"]'),o=a.find('input[name="qty"]'),i=n.find(".number-items-available"),c=n.find('[data-bb-value="product-sku"]'),l=e.error,s=e.data;if(l)return r.prop("disabled",!0),o.prop("disabled",!0),void a.find('input[name="id"]').val("");r.prop("disabled",!1),o.prop("disabled",!1),a.find('input[name="id"]').val(s.id),n.find('[data-bb-value="product-price"]').text(s.display_sale_price),s.sale_price!==s.price?n.find('[data-bb-value="product-original-price"]').text(s.display_price).show():n.find('[data-bb-value="product-original-price"]').hide(),s.sku?(c.text(s.sku),c.closest("div").show()):c.closest("div").hide(),s.error_message?(r.prop("disabled",!0),o.prop("disabled",!0),i.html("<span class='text-danger'>".concat(s.error_message,"</span>")).show()):s.warning_message?i.html("<span class='text-warning fw-medium fs-6'>".concat(s.warning_message,"</span>")).show():s.success_message?i.html("<span class='text-success'>".concat(s.success_message,"</span>")).show():i.html("").hide(),n.find(".bb-product-attribute-swatch-item").removeClass("disabled"),n.find(".bb-product-attribute-swatch-list select option").prop("disabled",!1);var u=s.unavailable_attribute_ids||[];u.length&&u.map(function(e){var t=n.find('.bb-product-attribute-swatch-item[data-id="'.concat(e,'"]'));t.length?(t.addClass("disabled"),t.find("input").prop("checked",!1)):(t=n.find('.bb-product-attribute-swatch-list select option[data-id="'.concat(e,'"]'))).length&&t.prop("disabled",!0)});var d="",f="",m=window.siteConfig||{};s.image_with_sizes.origin.length?s.image_with_sizes.origin.forEach(function(e){d+="\n                    <a href='".concat(e,"'>\n                        <img src='").concat(e,"' alt='").concat(s.name,"'>\n                    </a>\n                ")}):s.image_with_sizes.origin.push(m.img_placeholder),s.image_with_sizes.thumb.length?s.image_with_sizes.thumb.forEach(function(e){f+="\n                    <div>\n                        <img src='".concat(e,"' alt='").concat(s.name,"'>\n                    </div>\n                ")}):s.image_with_sizes.thumb.push(m.img_placeholder);var p=n.find(".bb-product-gallery"),h=p.find(".bb-product-gallery-images"),b=p.find(".bb-product-gallery-thumbnails"),v=h.find(".bb-product-video").clone(),g=b.find(".video-thumbnail").clone(),y=d,w=f;v.length>0&&v.each(function(){y+=$(this)[0].outerHTML}),g.length>0&&g.each(function(){w+="<div>".concat($(this)[0].outerHTML,"</div>")}),p.find(".bb-product-gallery-thumbnails").slick("unslick").html(w);var T=$(document).find(".bb-quick-view-gallery-images");T.length&&T.slick("unslick").html(y),p.find(".bb-product-gallery-images").slick("unslick").html(y),"undefined"!=typeof EcommerceApp&&EcommerceApp.initProductGallery()}})}),f(this,"handleUpdateCart",function(e){var t;t=e?$(e).closest("form"):$("form.cart-form"),$.ajax({type:"POST",url:t.prop("action"),data:t.serialize(),success:function(e){var t=e.error,n=e.message,r=e.data;t&&Theme.showError(n),a.ajaxLoadCart(r)},error:function(e){return Theme.handleError(e)}})}),f(this,"ajaxLoadCart",function(e){if(e){var t=$('[data-bb-toggle="cart-content"]');void 0!==e.count&&$('[data-bb-value="cart-count"]').text(e.count),void 0!==e.total_price&&$('[data-bb-value="cart-total-price"]').text(e.total_price),t.length&&(t.replaceWith(e.cart_content),a.productQuantityToggle(),void 0!==Theme.lazyLoadInstance&&Theme.lazyLoadInstance.update())}}),this.initClipboard(),$(document).on("click",'[data-bb-toggle="toggle-product-categories-tree"]',function(e){e.preventDefault();var t=$(e.currentTarget);t.toggleClass("active"),t.closest(".bb-product-filter-item").find("> .bb-product-filter-items").slideToggle().toggleClass("active")}).on("click",'[data-bb-toggle="toggle-filter-sidebar"]',function(){$(".bb-filter-offcanvas-area").toggleClass("offcanvas-opened"),$(".body-overlay").toggleClass("opened")}).on("click",".body-overlay",function(){$(".bb-filter-offcanvas-area").removeClass("offcanvas-opened"),$(".body-overlay").removeClass("opened")}).on("submit","form.bb-product-form-filter",function(e){e.preventDefault();var n,r=$(e.currentTarget),o=p(h,a).call(a,r.serializeArray()),l=r.prop("action"),s=l,u=new URLSearchParams,d={},f={},m=new URLSearchParams(window.location.search),b={},g=c(m.entries());try{for(g.s();!(n=g.n()).done;){var y=i(n.value,2),w=y[0],T=y[1];"page"!==w&&"_"!==w&&(b[w]||(b[w]=[]),b[w].push(T))}}catch(e){g.e(e)}finally{g.f()}o.forEach(function(e){e.name.includes("attributes[")&&e.name.endsWith("[]")?(f[e.name]||(f[e.name]=[]),f[e.name].push(e.value)):d[e.name]||(d[e.name]=e.value)});var k={};Object.keys(d).forEach(function(e){"page"!==e&&"_"!==e&&d[e]&&(k[e]||(k[e]=[]),k[e].push(d[e]))}),Object.keys(f).forEach(function(e){k[e]||(k[e]=[]),k[e]=k[e].concat(f[e])}),Object.keys(b).forEach(function(e){Array.isArray(b[e])&&b[e].sort()}),Object.keys(k).forEach(function(e){Array.isArray(k[e])&&k[e].sort()});var E=JSON.stringify(b)!==JSON.stringify(k);E&&d.page&&delete d.page,Object.keys(d).forEach(function(e){d[e]&&u.set(e,d[e])}),Object.keys(f).forEach(function(e){f[e].forEach(function(t){u.append(e,t)})});var x=u.toString();x&&(s+="?".concat(x));var C=o;E&&o.some(function(e){return"page"===e.name})&&(C=o.filter(function(e){return"page"!==e.name}));var S=[].concat(t(C),[{name:"_",value:Date.now()}]);if(window.location.href!==s){var _=JSON.stringify(o),j=r.prop("action");a.lastFilterFormData===_&&a.lastFilterFormAction===j||(a.lastFilterFormData=_,a.lastFilterFormAction=j,a.filterAjax&&a.filterAjax.abort(),a.filterTimeout&&clearTimeout(a.filterTimeout),a.filterTimeout=setTimeout(function(){p(v,a).call(a,l,S,s)},100))}}).on("change","form.bb-product-form-filter input, form.bb-product-form-filter select",function(e){var t=$(e.currentTarget),n=t.closest("form"),a=t.attr("name");if(a.includes("attributes["))n.trigger("submit");else if("checkbox"===t.attr("type")&&a&&a.endsWith("[]")){var r=a.slice(0,-2),o=n.find('input[name="'.concat(a,'"]')).filter(":checked"),i=n.find('input[name="'.concat(r,'"]'));i.length||(n.append('<input type="hidden" name="'.concat(r,'" value="">')),i=n.find('input[name="'.concat(r,'"]')));var c=o.map(function(){return $(this).val()}).get();i.val(c.join(","))}n.trigger("submit")}).on("keyup",".bb-form-quick-search input",function(e){p(b,a).call(a,$(e.currentTarget).closest("form"))}).on("click","body",function(e){$(e.target).closest(".bb-form-quick-search").length||$(".bb-quick-search-results").removeClass("show").html("")}).on("click",'[data-bb-toggle="quick-shop"]',function(e){e.preventDefault(),e.stopPropagation();var t=$(e.currentTarget),n=$("#quick-shop-modal");$.ajax({url:t.data("url"),type:"GET",beforeSend:function(){n.find(".quick-shop-content").length?(n.find(".quick-shop-content").html(""),n.find(".modal-body").addClass("modal-empty"),n.find(".loading-spinner").removeClass("d-none").show(),n.find(".quick-shop-content").hide()):n.find(".modal-body").html(""),n.modal("show"),document.dispatchEvent(new CustomEvent("ecommerce.quick-shop.before-send",{detail:{element:t,modal:n}}))},success:function(e){var t=e.data;n.find(".quick-shop-content").length?(n.find(".quick-shop-content").html(t),n.find(".loading-spinner").addClass("d-none").hide(),n.find(".modal-body").removeClass("modal-empty"),n.find(".quick-shop-content").show()):n.find(".modal-body").html(t)},error:function(e){return Theme.handleError(e)},complete:function(){document.dispatchEvent(new CustomEvent("ecommerce.quick-shop.completed",{detail:{element:t,modal:n}}))}})}).on("click",".bb-product-filter-link",function(e){e.preventDefault();var t=$(e.currentTarget),n=t.closest("form"),a=t.closest(".bb-product-filter"),r=t.data("id"),o=n.find('input[name="categories"]');o.length||(o=n.find('input[name="categories[]"]')),a.find(".bb-product-filter-link").removeClass("active"),t.addClass("active"),n.find('input[name="page"]').remove(),n.find('input[name="per-page"]').remove(),o.length&&r?(o.attr("name"),o.val(r).trigger("change")):(r||o.length&&o.val(null),n.prop("action",t.prop("href")).trigger("submit"))}).on("click",".bb-product-filter-clear",function(e){e.preventDefault();var t=$(e.currentTarget);p(v,a).call(a,t.prop("href"))}).on("click",".bb-product-filter-clear-all",function(e){e.preventDefault();var t=$(".bb-product-form-filter");t.find('input[type="text"], input[type="hidden"], input[type="radio"], select').val(null),t.find('input[type="checkbox"]').prop("checked",!1),t.trigger("submit")}).on("submit","form#cancel-order-form",function(e){e.preventDefault();var t=$(e.currentTarget),n=t.closest(".modal"),a=n.find('button[type="submit"]');$.ajax({url:t.prop("action"),type:"POST",data:t.serialize(),beforeSend:function(){a.addClass("btn-loading")},success:function(e){var t=e.error,a=e.message;t?Theme.showError(a):(Theme.showSuccess(a),n.modal("hide"),setTimeout(function(){return window.location.reload()},1e3))},error:function(e){return Theme.handleError(e)},complete:function(){return a.removeClass("btn-loading")}})}).on("click",'[data-bb-toggle="add-to-compare"]',function(e){e.preventDefault();var t=$(e.currentTarget),n=t.hasClass("active")?t.data("remove-url"):t.data("url"),a={};t.hasClass("active")&&(a={_method:"DELETE"}),$.ajax({url:n,method:"POST",data:a,beforeSend:function(){return t.addClass("btn-loading")},success:function(e){var n=e.error,a=e.message,r=e.data;n?Theme.showError(a):(Theme.showSuccess(a),t.toggleClass("active"),void 0!==r.count&&$('[data-bb-value="compare-count"]').text(r.count),t.hasClass("active")?document.dispatchEvent(new CustomEvent("ecommerce.compare.added",{detail:{data:r,element:t,extraData:r.extra_data}})):document.dispatchEvent(new CustomEvent("ecommerce.compare.removed",{detail:{data:r,element:t,extraData:r.extra_data}})))},error:function(e){return Theme.handleError(e)},complete:function(){return t.removeClass("btn-loading")}})}).on("click",'[data-bb-toggle="remove-from-compare"]',function(e){e.preventDefault();var t=$(e.currentTarget),n=t.closest("table");$.ajax({url:t.data("url"),method:"POST",data:{_method:"DELETE"},success:function(e){var a=e.error,r=e.message,o=e.data;a?Theme.showError(r):(Theme.showSuccess(r),document.dispatchEvent(new CustomEvent("ecommerce.compare.removed",{detail:{data:o,element:t,extraData:o.extra_data}})),void 0!==o.count?($('[data-bb-value="compare-count"]').text(o.count),o.count>0&&n.find("td:nth-child(".concat(t.closest("td").index()+1,")")).remove()):window.location.reload())},error:function(e){return Theme.handleError(e)}})}).on("click",'[data-bb-toggle="add-to-wishlist"]',function(e){e.preventDefault();var t=$(e.currentTarget),n=t.data("url");$.ajax({url:n,method:"POST",beforeSend:function(){return t.addClass("btn-loading")},success:function(e){var n=e.error,a=e.message,r=e.data;n?Theme.showError(a):(void 0!==r.count&&$('[data-bb-value="wishlist-count"]').text(r.count),Theme.showSuccess(a),document.dispatchEvent(new CustomEvent("ecommerce.wishlist.added",{detail:{data:r,element:t,extraData:r.extra_data,added:r.added}})))},error:function(e){return Theme.handleError(e)},complete:function(){return t.removeClass("btn-loading")}})}).on("click",'[data-bb-toggle="remove-from-wishlist"]',function(e){e.preventDefault();var t=$(e.currentTarget);$.ajax({url:t.data("url"),method:"POST",data:{_method:"DELETE"},beforeSend:function(){return t.addClass("btn-loading")},success:function(e){var n=e.error,a=e.message,r=e.data;n?Theme.showError(a):(Theme.showSuccess(a),t.closest("tr").remove(),void 0!==r.count&&($('[data-bb-value="wishlist-count"]').text(r.count),0===r.count&&window.location.reload()),document.dispatchEvent(new CustomEvent("ecommerce.wishlist.removed",{detail:{data:r,element:t,extraData:r.extra_data}})))},error:function(e){return Theme.handleError(e)},complete:function(){return t.removeClass("btn-loading")}})}).on("click",'[data-bb-toggle="add-to-cart"]',function(e){e.preventDefault();var t=$(e.currentTarget),n={id:t.data("id")},a=t.closest("tr").find('input[name="qty"]');a&&(n.qty=a.val()),$.ajax({url:t.data("url"),method:"POST",data:n,dataType:"json",beforeSend:function(){return t.addClass("btn-loading")},success:function(e){var n=e.error,a=e.message,r=e.data;if(n)return Theme.showError(a),void 0!==r.next_url&&setTimeout(function(){window.location.href=r.next_url},500),!1;if(r&&void 0!==r.next_url)return window.location.href=r.next_url,!1;var o=!0;void 0!==t.data("show-toast-on-success")&&(o=t.data("show-toast-on-success")),o&&Theme.showSuccess(a),void 0!==r.count&&$('[data-bb-value="cart-count"]').text(r.count),document.dispatchEvent(new CustomEvent("ecommerce.cart.added",{detail:{data:r,element:t,message:a,extraData:r.extra_data}}))},error:function(e){return Theme.handleError(e)},complete:function(){return t.removeClass("btn-loading")}})}).on("click",'[data-bb-toggle="remove-from-cart"]',function(e){e.preventDefault();var t=$(e.currentTarget);$.ajax({url:t.prop("href")||t.data("url"),method:"GET",beforeSend:function(){return t.addClass("btn-loading")},success:function(e){var n=e.error,a=e.message,r=e.data;n?Theme.showError(a):(Theme.showSuccess(a),t.closest("tr").remove(),void 0!==r.count&&($('[data-bb-value="cart-count"]').text(r.count),0===r.count&&window.location.reload()),document.dispatchEvent(new CustomEvent("ecommerce.cart.removed",{detail:{data:r,element:t,extraData:r.extra_data}})))},error:function(e){return Theme.handleError(e)},complete:function(){return t.removeClass("btn-loading")}})}).on("submit",'[data-bb-toggle="coupon-form"]',function(e){e.preventDefault();var t=$(e.currentTarget),n=t.find('button[type="submit"]');$.ajax({url:t.prop("action"),type:"POST",data:t.serialize(),beforeSend:function(){return n.prop("disabled",!0).addClass("btn-loading")},success:function(e){var n=e.error,a=e.message,r=e.data;n?Theme.showError(a):(Theme.showSuccess(a),document.dispatchEvent(new CustomEvent("ecommerce.coupon.applied",{detail:{data:r,element:t}})))},error:function(e){return Theme.handleError(e)},complete:function(){return n.prop("disabled",!1).removeClass("btn-loading")}})}).on("click",'[data-bb-toggle="quick-view-product"]',function(e){e.preventDefault();var t=$(e.currentTarget);$.ajax({url:t.data("url"),type:"GET",beforeSend:function(){return t.prop("disabled",!0).addClass("btn-loading")},success:function(e){var n=e.error,r=e.message,o=e.data;if(n)Theme.showError(r);else{var i=$('[data-bb-toggle="quick-view-modal"]');i.modal("show"),i.find(".modal-body").html(o),document.dispatchEvent(new CustomEvent("ecommerce.quick-view.initialized",{detail:{data:o,element:t}})),setTimeout(function(){a.initProductGallery(!0)},100)}},error:function(e){return Theme.handleError(e)},complete:function(){return t.prop("disabled",!1).removeClass("btn-loading")}})}).on("click",'[data-bb-toggle="product-form"] button[type="submit"]',function(e){e.preventDefault();var t=$(e.currentTarget),n=t.closest("form"),a=n.serializeArray();""!==n.find('input[name="id"]').val()&&(a.push({name:"checkout",value:"checkout"===t.prop("name")?1:0}),$.ajax({type:"POST",url:n.prop("action"),data:a,beforeSend:function(){t.prop("disabled",!0).addClass("btn-loading")},success:function(e){var a=e.error,r=e.message,o=e.data;a?Theme.showError(r):(Theme.showSuccess(r),n.find('input[name="qty"]').val(1),void 0!==o.count&&$('[data-bb-value="cart-count"]').text(o.count),document.dispatchEvent(new CustomEvent("ecommerce.cart.added",{detail:{data:o,element:t,extraData:o.extra_data}})))},error:function(e){return Theme.handleError(e)},complete:function(){return t.prop("disabled",!1).removeClass("btn-loading")}}))}).on("change",'[data-bb-toggle="product-form-filter-item"]',function(e){var t=$(e.currentTarget),n=$(".bb-product-form-filter"),a=t.prop("name"),r=t.val();if(a.endsWith("[]")&&!a.includes("attributes[")){var o=a.slice(0,-2),i=n.find('input[name="'.concat(o,'"]'));i.length||(n.append('<input type="hidden" name="'.concat(o,'" value="">')),i=n.find('input[name="'.concat(o,'"]')));var c=i.val()?i.val().split(","):[],l=new Set(c);l.add(r),i.val(Array.from(l).join(","))}else if(t.is(":checkbox")){var s=t.prop("checked"),u=n.find('input[type="hidden"][name="'.concat(a,'"]'));u.length?u.val(s?r:""):n.append('<input type="hidden" name="'.concat(a,'" value="').concat(s?r:"",'">'))}else{var d=n.find('input[name="'.concat(a,'"]'));d.length&&d.val(r)}n.trigger("submit")}),$(".bb-product-price-filter").length&&this.initPriceFilter(),p(g,this).call(this)},a=[{key:"isRtl",value:function(){return"rtl"===document.body.getAttribute("dir")}},{key:"initLightGallery",value:function(e){e.length&&(e.data("lightGallery")&&e.data("lightGallery").destroy(!0),e.lightGallery({selector:"a",thumbnail:!0,share:!1,fullScreen:!1,autoplay:!1,autoplayControls:!1,actualSize:!1}))}},{key:"initProductGallery",value:function(){var e=this;if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){var t=function(e,t){null!=e&&null!=t&&e.contentWindow.postMessage(JSON.stringify(t),"*")},n=function(e,n){var a,r,o,i,c;if(r=(a=e.find(".slick-current")).data("provider"),i=a.get(0),o=a.data("video-start"),"vimeo"===r)switch(n){case"play":null!=o&&o>0&&!a.hasClass("started")&&(a.addClass("started"),t(i,{method:"setCurrentTime",value:o})),t(i,{method:"play",value:1});break;case"pause":t(i,{method:"pause",value:1})}else if("youtube"===r)switch(n){case"play":t(i,{event:"command",func:"mute"}),t(i,{event:"command",func:"playVideo"});break;case"pause":t(i,{event:"command",func:"pauseVideo"})}else"video"===r&&null!=(c=a.children("video").get(0))&&("play"===n?c.play():c.pause())},a=$(document).find(".bb-product-gallery-images");if(!a.length)return;var r=$(document).find(".bb-product-gallery-thumbnails");if(a.on("init",function(e){e=$(e.currentTarget),setTimeout(function(){n(e,"play")},1e3)}),a.on("beforeChange",function(e,t){t=$(t.$slider),n(t,"pause")}),a.on("afterChange",function(e,t){t=$(t.$slider),n(t,"play")}),$(document).on("click",".bb-button-trigger-play-video",function(e){var t=$(e.currentTarget),n=document.getElementById(t.data("target"));n.play(),t.closest(".bb-product-video").addClass("video-playing"),n.addEventListener("ended",function(){t.closest(".bb-product-video").removeClass("video-playing"),n.currentTime=0,n.pause()})}),a.length&&a.map(function(t,n){var a=$(n);a.hasClass("slick-initialized")&&a.slick("unslick"),a.slick({slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!1,infinite:!1,fade:!0,lazyLoad:"ondemand",asNavFor:".bb-product-gallery-thumbnails",rtl:e.isRtl()})}),r.length){var o=1===r.data("vertical");window.innerWidth<768&&(o=!1),r.slick({slidesToShow:6,slidesToScroll:1,asNavFor:".bb-product-gallery-images",focusOnSelect:!0,infinite:!1,rtl:this.isRtl()&&!o,vertical:o,verticalSwiping:o,prevArrow:'<button class="slick-prev slick-arrow"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg></button>',nextArrow:'<button class="slick-next slick-arrow"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 6l6 6l-6 6" /></svg></button>',responsive:[{breakpoint:768,settings:{slidesToShow:4}}]})}this.initLightGallery(a),void 0!==Theme.lazyLoadInstance&&Theme.lazyLoadInstance.update()}var i=$(document).find(".bb-quick-view-gallery-images");i.length&&(i.hasClass("slick-initialized")&&i.slick("unslick"),i.slick({slidesToShow:1,slidesToScroll:1,dots:!1,arrows:!0,adaptiveHeight:!1,rtl:this.isRtl()})),this.initLightGallery(i)}},{key:"initPriceFilter",value:function(){if(void 0===$.fn.slider)throw new Error("jQuery UI slider is required for price filter");var e=$(document).find(".bb-product-price-filter"),t=e.find(".price-slider"),n=e.find(".input-range-label");if(e){var a=e.find('input[name="min_price"]'),r=e.find('input[name="max_price"]'),o=parseInt(a.val())||t.data("min"),i=parseInt(r.val())||t.data("max"),c=this.isRtl(),l=c?-t.data("max"):t.data("min"),s=c?-t.data("min"):t.data("max"),u=c?[-i,-o]:[o,i];t.slider({range:!0,min:l,max:s,values:u,slide:function(e,t){var a=c?-t.values[1]:t.values[0],r=c?-t.values[0]:t.values[1];n.find(".from").text(this.formatPrice(a)),n.find(".to").text(this.formatPrice(r))}.bind(this),change:function(e,t){var n=c?-t.values[1]:t.values[0],l=c?-t.values[0]:t.values[1];parseInt(o)!==n&&a.val(n).trigger("change"),parseInt(i)!==l&&r.val(l).trigger("change")}.bind(this)});var d=t.slider("values"),f=c?-d[1]:d[0],m=c?-d[0]:d[1];n.find(".from").text(this.formatPrice(f)),n.find(".to").text(this.formatPrice(m))}}},{key:"formatPrice",value:function(e,t,n){var a=window.currencies||{};t||(t=void 0!==a.number_after_dot?a.number_after_dot:2);var r="\\d(?=(\\d{"+(n||3)+"})+$)",o="";if(a.show_symbol_or_title&&(o=a.symbol||a.title||""),a.display_big_money){var i="";e>=1e6&&e<1e9?(e/=1e6,i=a.million):e>=1e9&&(e/=1e9,i=a.billion),o=i+(o?" ".concat(o):"")}return e=(e=e.toFixed(Math.max(0,~~t)).toString().split("."))[0].toString().replace(new RegExp(r,"g"),"$&".concat(a.thousands_separator))+(e[1]?a.decimal_separator+e[1]:""),a.show_symbol_or_title&&(e=a.is_prefix_symbol?o+e:e+o),e}},{key:"initClipboard",value:function(){$(document).on("click","[data-ecommerce-clipboard]",function(){var e=o(n().m(function e(t){var a,r,o,i,c,l,s;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.preventDefault(),a=$(t.currentTarget),r=a.data("clipboard-message"),o=a.data("clipboard-text")){e.n=1;break}return e.a(2);case 1:if(i=!1,!navigator.clipboard||!window.isSecureContext){e.n=5;break}return e.p=2,e.n=3,navigator.clipboard.writeText(o);case 3:i=!0,e.n=5;break;case 4:e.p=4,s=e.v,console.warn("Clipboard API failed, falling back to legacy method:",s);case 5:if(!i){(c=document.createElement("textarea")).value=o,c.style.position="fixed",c.style.left="-999999px",c.style.top="-999999px",document.body.appendChild(c),c.focus(),c.select();try{document.execCommand("copy"),i=!0}catch(e){console.error("Failed to copy text: ",e)}document.body.removeChild(c)}i?(r&&"undefined"!=typeof Theme&&Theme.showSuccess&&Theme.showSuccess(r),l=a.html(),a.html('<i class="ti ti-check"></i> '+(r||"Copied!")),setTimeout(function(){a.html(l)},2e3)):"undefined"!=typeof Theme&&Theme.showError&&Theme.showError("Failed to copy to clipboard");case 6:return e.a(2)}},e,null,[[2,4]])}));return function(t){return e.apply(this,arguments)}}())}}],a&&u(e.prototype,a),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,a,r}();$(function(){window.EcommerceApp=new y,EcommerceApp.productQuantityToggle(),EcommerceApp.initProductGallery(),EcommerceApp.onChangeProductAttribute(),$(".bb-product-price-filter").length&&EcommerceApp.initPriceFilter(),document.addEventListener("ecommerce.quick-shop.completed",function(){EcommerceApp.productQuantityToggle()}),document.addEventListener("ecommerce.cart.quantity.change",function(e){var t=e.detail.element;EcommerceApp.handleUpdateCart(t)}),document.addEventListener("ecommerce.product-filter.before",function(){var e=$('[data-bb-toggle="product-list"]').find(".bb-product-items-wrapper");e.length&&e.append('<div class="loading-spinner"></div>')}),document.addEventListener("ecommerce.product-filter.success",function(e){var t=e.detail.data,n=$(".bb-product-items-wrapper");if(n.length&&n.html(t.data),t.additional){var a=$(".bb-product-listing-page-description"),r=t.additional.product_listing_page_description_html;r?a.length&&(a.html(r),document.dispatchEvent(new CustomEvent("shortcode.loaded",{detail:{name:null,attributes:[],html:r}})),void 0!==Theme.lazyLoadInstance&&Theme.lazyLoadInstance.update()):a.html("");var o=$(".bb-shop-sidebar"),i=$("[data-bb-filter-sidebar]");i.length||(i=o);var c={};$(".bb-product-filter-link.active").each(function(){var e=$(this).closest(".bb-product-filter").data("filter-group");e&&(c[e]=$(this).data("id"))});var l=[];i.find('input[type="checkbox"]:checked').each(function(){var e=$(this),t=e.attr("name"),n=e.val(),a=e.attr("id");l.push({name:t,value:n,id:a})}),i.replaceWith(t.additional.filters_html),setTimeout(function(){var e=$("[data-bb-filter-sidebar]").length?$("[data-bb-filter-sidebar]"):$(".bb-shop-sidebar");Object.keys(c).forEach(function(t){var n=c[t];e.find('.bb-product-filter[data-filter-group="'.concat(t,'"] .bb-product-filter-link[data-id="').concat(n,'"]')).addClass("active")}),l.forEach(function(t){var n=null;t.id&&(n=e.find("#".concat(t.id))),n&&n.length||(n=e.find('input[type="checkbox"][name="'.concat(t.name,'"][value="').concat(t.value,'"]'))),n&&n.length||(n=e.find('input[type="checkbox"][value="'.concat(t.value,'"]')).filter(function(){return $(this).attr("name")===t.name})),n&&n.length&&n.prop("checked",!0)})},10)}$(document).find(".bb-product-price-filter").length&&EcommerceApp.initPriceFilter(),n.length&&$("html, body").animate({scrollTop:n.offset().top-120});var s=$('[data-bb-toggle="product-list"]').find(".bb-product-items-wrapper");s.length&&s.find(".loading-spinner").remove()}),document.addEventListener("ecommerce.product-filter.completed",function(){void 0!==Theme.lazyLoadInstance&&Theme.lazyLoadInstance.update()})})})();